ORG 00H
	SDA EQU P2.1
	SCL EQU P2.2
	MOV P3, #0FFH ;Turn Off LED 
	
	;CODE
	;ACALL I2C_INIT
	ACALL I2C_start
	MOV DPTR, #OLEDINITSEQ
	MOV R1, #33
	REPSEQ: 
		MOVC A, @A+DPTR
		ACALL I2C_SEND
		ACALL DELAY
		MOV P3, #0FFH
		ACALL DELAY
		INC DPTR
		DJNZ R1, REPSEQ
	LCALL I2C_stop
	
	
	
	MOV P3, #0FFH
	;OLED reading DATA
	LCALL I2C_start
	MOV A,#78H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	MOV R2,#7
	AGAINS: MOV R3,#128
	HERES: MOV A,#00H
	ACALL I2C_SEND
	DJNZ R3,HERES
	DJNZ R2,AGAINS
	
	MOV A,#00H
	ACALL I2C_SEND
	;F
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#0AH
	ACALL I2C_SEND
	MOV A,#0AH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	
	;N
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;A
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;L
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	;L
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	;SPACES
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;T
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND	
	
	;S
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#5EH
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND	
	MOV A,#72H
	ACALL I2C_SEND
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;N
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;A
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;S
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#5EH
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#72H
	ACALL I2C_SEND
	
	;S
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#5EH
	ACALL I2C_SEND	
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#72H
	ACALL I2C_SEND
	
	;E
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND	
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#42H
	ACALL I2C_SEND
	MOV A,#42H
	ACALL I2C_SEND
	
	;M
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;M
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;B
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;L
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND	
	MOV A,#40H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND

	;SMILEY
	MOV A,#22H
	ACALL I2C_SEND
	MOV A,#22H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#82H
	ACALL I2C_SEND
	MOV A,#44H
	ACALL I2C_SEND
	MOV A,#28H
	ACALL I2C_SEND
	MOV A,#10H
	ACALL I2C_SEND

	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	
	
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	
	
	
	
	LCALL I2C_stop
	MOV P3,#0FFH 	;LED OFF
	
	WAIT: SJMP WAIT	;CODE ENDS

	
	
	
	
	
	
		
	;Initializing the I2C Bus
;	I2C_INIT:
;		RET
	
	;Creating the start condition
	I2C_start:
		CLR SDA
		SETB SDA
		SETB SCL
		SETB SCL
		CLR SDA
		CLR SCL
		RET

	;Creating the restart condition
;	I2C_REstart:
;		CLR SCL
;		SETB SDA
;		SETB SCL
;		CLR SDA
;		RET

	;Creating the stop condition
	I2C_stop:
		CLR SCL
		CLR SDA
		SETB SCL
		SETB SDA
		RET
	
	;Creating the send AND receive acknowledge condition
	I2C_SEND:
		MOV R6, #08;
		REP:
			CLR SCL
			RLC A
			MOV SDA, C
			SETB SCL
			DJNZ R6, REP
		CLR SCL
		SETB SDA
		SETB SCL
		WAIT1:	
			MOV C, SDA
			JC WAIT1
		CLR A
		RLC A
		MOV P3,A
		CLR SCL
		RET

	;Delay of approx 2 seconds
	DELAY:
		MOV R2,#200
		AGAIN: MOV R3,#250
		HERE: NOP
			NOP
			DJNZ R3,HERE
			DJNZ R2,AGAIN
			RET
	
	;OLED Initilization Sequence
	;ORG 1000H
	OLEDINITSEQ: DB 78H, 00H, 0AEH, 0A8H, 3FH, 0D3H, 00H, 40H, 0A1H, 0C8H, 0DAH, 12H, 81H, 7FH, 0A4H, 0A6H, 0D5H, 80H, 8DH, 14H, 0D9H, 0F1H, 0DBH, 40H, 20H, 00H, 0AFH, 21H, 00H, 7FH, 22H, 00H, 07H
	
	

	END	