ORG 00H
	SDA EQU P2.1
	SCL EQU P2.2
	MOV P3, #0FFH ;Turn Off LED 
	
	;CODE
	;ACALL I2C_INIT
	ACALL I2C_start
	MOV DPTR, #OLEDINITSEQ
	MOV R1, #33
	REPSEQ: 
		MOVC A, @A+DPTR
		ACALL I2C_SEND
		ACALL DELAY
		MOV P3, #0FFH
		ACALL DELAY
		INC DPTR
		DJNZ R1, REPSEQ
	LCALL I2C_stop
	MOV P3, #0FFH
	
	
	;OLED reading DATA
	LCALL I2C_start
	MOV DPTR, #OLEDREADSEQ
	MOV R1, #2
	CLR A
	REPSEQ5: 
		MOVC A, @A+DPTR
		ACALL I2C_SEND
		ACALL DELAY
		MOV P3, #0FFH
		ACALL DELAY
		INC DPTR
		DJNZ R1, REPSEQ5
	
	
	
	;dATA	
	MOV R2,#7
	AGAINS: MOV R3,#128
	HERES: MOV A,#00H
	ACALL I2C_SEND
	DJNZ R3,HERES
	DJNZ R2,AGAINS
	
	MOV A,#00H
	ACALL I2C_SEND
	;F
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#0AH
	ACALL I2C_SEND
	MOV A,#0AH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	
	;N
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;A
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;L
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	;L
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	;SPACES
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;T
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND	
	
	;S
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#5EH
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND	
	MOV A,#72H
	ACALL I2C_SEND
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;I
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;N
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	;A
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#12H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;S
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#5EH
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#72H
	ACALL I2C_SEND
	
	;S
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#5EH
	ACALL I2C_SEND	
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#72H
	ACALL I2C_SEND
	
	;E
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND	
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#42H
	ACALL I2C_SEND
	MOV A,#42H
	ACALL I2C_SEND
	
	;M
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;M
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#02H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;B
	MOV A,#00H
	ACALL I2C_SEND	
	MOV A,#7EH
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#52H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND
	
	;L
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#7EH
	ACALL I2C_SEND	
	MOV A,#40H
	ACALL I2C_SEND
	MOV A,#40H
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND

	;SMILEY
	MOV A,#22H
	ACALL I2C_SEND
	MOV A,#22H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#82H
	ACALL I2C_SEND
	MOV A,#44H
	ACALL I2C_SEND
	MOV A,#28H
	ACALL I2C_SEND
	MOV A,#10H
	ACALL I2C_SEND

	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#00H
	ACALL I2C_SEND
	
	
	
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	;Y
	MOV A,#00H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	MOV A,#70H
	ACALL I2C_SEND
	MOV A,#0EH
	ACALL I2C_SEND
	
	MOV A,#'A'
	LCALL OLEDDISCHAR

	MOV A,#'a'
	LCALL OLEDDISCHAR
	
	
	LCALL I2C_stop
	MOV P3,#0FFH 	;LED OFF
	
	WAIT: SJMP WAIT	;CODE ENDS

	
	
	
	
	
	
		
	;Initializing the I2C Bus
;	I2C_INIT:
;		RET
	
	;Creating the start condition
	I2C_start:
		CLR SDA
		SETB SDA
		SETB SCL
		SETB SCL
		CLR SDA
		CLR SCL
		RET

	;Creating the restart condition
;	I2C_REstart:
;		CLR SCL
;		SETB SDA
;		SETB SCL
;		CLR SDA
;		RET

	;Creating the stop condition
	I2C_stop:
		CLR SCL
		CLR SDA
		SETB SCL
		SETB SDA
		RET
	
	;Creating the send AND receive acknowledge condition
	I2C_SEND:
		MOV R6, #08;
		REP:
			CLR SCL
			RLC A
			MOV SDA, C
			SETB SCL
			DJNZ R6, REP
		CLR SCL
		SETB SDA
		SETB SCL
		WAIT1:	
			MOV C, SDA
			JC WAIT1
		CLR A
		RLC A
		MOV P3,A
		CLR SCL
		RET

	;Delay of approx 2 seconds
	DELAY:
		MOV R2,#200
		AGAIN: MOV R3,#250
		HERE: NOP
			NOP
			DJNZ R3,HERE
			DJNZ R2,AGAIN
			RET
	
	OLEDDISCHAR:
			CLR C
			SUBB A,#32
			MOV R4,A
			MOV DPTR, #OLEDCHARDISP
			BT1:
				MOV B,#5
				BT2:
					INC DPTR
					DJNZ B,BT2
				DJNZ R4,BT1
			CLR A
			MOV B,#5
			BT3:MOVC A,@A+DPTR
			ACALL I2C_SEND
			INC DPTR
			DJNZ B,BT3
		RET
	
	
	
	
	
	
	
	
	;OLED Initilization Sequence
	;ORG 1000H
	OLEDINITSEQ: DB 78H, 00H, 0AEH, 0A8H, 3FH, 0D3H, 00H, 40H, 0A1H, 0C8H, 0DAH, 12H, 81H, 7FH, 0A4H, 0A6H, 0D5H, 80H, 8DH, 14H, 0D9H, 0F1H, 0DBH, 40H, 20H, 00H, 0AFH, 21H, 00H, 7FH, 22H, 00H, 07H
	OLEDREADSEQ: DB 78H, 40H
	
	
	OLEDCHARDISP: DB 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2f, 0x00, 0x00, 0x00, 0x07, 0x00, 0x07, 0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14, 0x24, 0x2a, 0x7f, 0x2a, 0x12, 0x23, 0x13, 0x08, 0x64, 0x62, 0x36, 0x49, 0x55, 0x22, 0x50, 0x00, 0x05, 0x03, 0x00, 0x00, 0x00, 0x1c, 0x22, 0x41, 0x00, 0x00, 0x41, 0x22, 0x1c, 0x00, 0x14, 0x08, 0x3E, 0x08, 0x14, 0x08, 0x08, 0x3E, 0x08, 0x08, 0x00, 0x00, 0xA0, 0x60, 0x00, 0x08, 0x08, 0x08, 0x08, 0x08, 0x00, 0x60, 0x60, 0x00, 0x00, 0x20, 0x10, 0x08, 0x04, 0x02, 0x3E
   OLEDCHARDISP1: DB 0x51, 0x49, 0x45, 0x3E, 0x00, 0x42, 0x7F, 0x40, 0x00, 0x42, 0x61, 0x51, 0x49, 0x46, 0x21, 0x41, 0x45, 0x4B, 0x31, 0x18, 0x14, 0x12, 0x7F, 0x10, 0x27, 0x45, 0x45, 0x45, 0x39, 0x3C, 0x4A, 0x49, 0x49, 0x30, 0x01, 0x71, 0x09, 0x05, 0x03, 0x36, 0x49, 0x49, 0x49, 0x36, 0x06, 0x49, 0x49, 0x29, 0x1E, 0x00, 0x36, 0x36, 0x00, 0x00, 0x00, 0x56, 0x36, 0x00, 0x00, 0x08, 0x14, 0x22, 0x41, 0x00, 0x14, 0x14, 0x14, 0x14, 0x14, 0x00, 0x41, 0x22, 0x14, 0x08, 0x02, 0x01, 0x51, 0x09, 0x06, 0x32, 0x49
   OLEDCHARDISP2: DB 0x59, 0x51, 0x3E, 0x7C, 0x12, 0x11, 0x12, 0x7C, 0x7F, 0x49, 0x49, 0x49, 0x36, 0x3E, 0x41, 0x41, 0x41, 0x22, 0x7F, 0x41, 0x41, 0x22, 0x1C, 0x7F, 0x49, 0x49, 0x49, 0x41, 0x7F, 0x09, 0x09, 0x09, 0x01, 0x3E, 0x41, 0x49, 0x49, 0x7A, 0x7F, 0x08, 0x08, 0x08, 0x7F, 0x00, 0x41, 0x7F, 0x41, 0x00, 0x20, 0x40, 0x41, 0x3F, 0x01, 0x7F, 0x08, 0x14, 0x22, 0x41, 0x7F, 0x40, 0x40, 0x40, 0x40, 0x7F, 0x02, 0x0C, 0x02, 0x7F, 0x7F, 0x04, 0x08, 0x10, 0x7F, 0x3E, 0x41, 0x41, 0x41, 0x3E, 0x7F, 0x09, 0x09
   OLEDCHARDISP3: DB 0x09, 0x06, 0x3E, 0x41, 0x51, 0x21, 0x5E, 0x7F, 0x09, 0x19, 0x29, 0x46, 0x46, 0x49, 0x49, 0x49, 0x31, 0x01, 0x01, 0x7F, 0x01, 0x01, 0x3F, 0x40, 0x40, 0x40, 0x3F, 0x1F, 0x20, 0x40, 0x20, 0x1F, 0x3F, 0x40, 0x38, 0x40, 0x3F, 0x63, 0x14, 0x08, 0x14, 0x63, 0x07, 0x08, 0x70, 0x08, 0x07, 0x61, 0x51, 0x49, 0x45, 0x43, 0x00, 0x7F, 0x41, 0x41, 0x00, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0x00, 0x41, 0x41, 0x7F, 0x00, 0x04, 0x02, 0x01, 0x02, 0x04, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x03, 0x05, 0x00
   OLEDCHARDISP4: DB 0x00, 0x20, 0x54, 0x54, 0x54, 0x78, 0x7F, 0x48, 0x44, 0x44, 0x38, 0x38, 0x44, 0x44, 0x44, 0x20, 0x38, 0x44, 0x44, 0x48, 0x7F, 0x38, 0x54, 0x54, 0x54, 0x18, 0x08, 0x7E, 0x09, 0x01, 0x02, 0x18, 0xA4, 0xA4, 0xA4, 0x7C, 0x7F, 0x08, 0x04, 0x04, 0x78, 0x00, 0x44, 0x7D, 0x40, 0x00, 0x40, 0x80, 0x84, 0x7D, 0x00, 0x7F, 0x10, 0x28, 0x44, 0x00, 0x00, 0x41, 0x7F, 0x40, 0x00, 0x7C, 0x04, 0x18, 0x04, 0x78, 0x7C, 0x08, 0x04, 0x04, 0x78, 0x38, 0x44, 0x44, 0x44, 0x38, 0xFC, 0x24, 0x24, 0x24, 0x18
   OLEDCHARDISP5: DB 0x18, 0x24, 0x24, 0x18, 0xFC, 0x7C, 0x08, 0x04, 0x04, 0x08, 0x48, 0x54, 0x54, 0x54, 0x20, 0x04, 0x3F, 0x44, 0x40, 0x20, 0x3C, 0x40, 0x40, 0x20, 0x7C, 0x1C, 0x20, 0x40, 0x20, 0x1C, 0x3C, 0x40, 0x30, 0x40, 0x3C, 0x44, 0x28, 0x10, 0x28, 0x44, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C, 0x44, 0x64, 0x54, 0x4C, 0x44, 0x00, 0x10, 0x7C, 0x82, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x82, 0x7C, 0x10, 0x00, 0x00, 0x06, 0x09, 0x09, 0x06
	

	END	